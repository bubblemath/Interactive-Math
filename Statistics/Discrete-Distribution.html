<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Discrete Distribution Explorer</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            padding: 40px;
        }
        
        h1 {
            color: #667eea;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2em;
        }
        
        .setup-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        
        .input-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .input-group {
            display: flex;
            flex-direction: column;
        }
        
        label {
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
        }
        
        input[type="number"], select {
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }
        
        input[type="number"]:focus, select:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .slider-container {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }
        
        .slider-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .slider-value {
            background: #667eea;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9em;
        }
        
        input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
        }
        
        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            border: none;
        }
        
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-top: 10px;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .data-table-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            margin: 20px 0;
        }
        
        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            text-align: center;
            font-weight: 600;
        }
        
        td {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid #eee;
        }
        
        td input {
            width: 100%;
            padding: 8px;
            border: 2px solid #ddd;
            border-radius: 6px;
            text-align: center;
        }
        
        .total-row {
            background: #e3f2fd;
            font-weight: 700;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        
        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
            margin-bottom: 8px;
        }
        
        .stat-value {
            font-size: 1.8em;
            font-weight: bold;
        }
        
        .formula-section {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 2px solid #667eea;
        }
        
        .formula-title {
            color: #667eea;
            font-weight: 700;
            margin-bottom: 15px;
            font-size: 1.2em;
        }
        
        .formula {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 1.1em;
        }
        
        .chart-container {
            background: white;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .chart-wrapper {
            position: relative;
            height: 400px;
        }
        
        .probability-calculator {
            background: white;
            padding: 25px;
            border-radius: 10px;
            margin-top: 20px;
        }
        
        .calc-title {
            color: #667eea;
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 20px;
        }
        
        .calc-options {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .radio-option {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
        }
        
        .radio-option input[type="radio"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        
        .calc-inputs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .calc-result {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            font-size: 1.2em;
            margin-top: 20px;
        }
        
        .calc-result-value {
            font-size: 2em;
            font-weight: bold;
            margin-top: 10px;
        }
        
        .hidden {
            display: none;
        }
        
        .error {
            background: #f8d7da;
            color: #721c24;
            padding: 12px;
            border-radius: 8px;
            margin: 10px 0;
            border: 1px solid #f5c6cb;
        }
        
        .warning {
            background: #fff3cd;
            color: #856404;
            padding: 12px;
            border-radius: 8px;
            margin: 10px 0;
            border: 1px solid #ffeaa7;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìä Discrete Distribution Explorer</h1>
        
        <!-- Setup Section -->
        <div class="setup-section">
            <h2 style="color: #667eea; margin-bottom: 20px;">Setup Your Distribution</h2>
            
            <div class="input-row">
                <div class="input-group">
                    <label for="numValues">Number of Data Values:</label>
                    <input type="number" id="numValues" min="2" max="20" value="5" placeholder="Enter number of values">
                </div>
                
                <div class="input-group">
                    <label for="dataType">Data Type:</label>
                    <select id="dataType">
                        <option value="frequency">Frequency Data</option>
                        <option value="probability">Probability Data</option>
                    </select>
                </div>
            </div>
            
            <div class="slider-container">
                <div class="slider-label">
                    <label for="decimals">Decimal Precision:</label>
                    <span class="slider-value" id="decimal-display">4 decimal places</span>
                </div>
                <input type="range" id="decimals" min="2" max="6" value="4" step="1">
            </div>
            
            <button onclick="generateTable()">Generate Table</button>
        </div>
        
        <!-- Data Entry Section -->
        <div id="dataSection" class="hidden">
            <div class="data-table-section">
                <h2 style="color: #667eea; margin-bottom: 20px;" id="tableTitle">Enter Your Data</h2>
                
                <div id="warningMessage"></div>
                
                <table id="dataTable">
                    <thead id="tableHeader"></thead>
                    <tbody id="tableBody"></tbody>
                    <tfoot id="tableFooter"></tfoot>
                </table>
                
                <button onclick="calculateStatistics()">Calculate Statistics</button>
            </div>
            
            <!-- Results Section -->
            <div id="resultsSection" class="hidden">
                <!-- Formulas -->
                <div class="formula-section">
                    <div class="formula-title">üìê Formulas for Discrete Distributions</div>
                    <div class="formula">
                        <strong>Mean (Œº):</strong> Œº = Œ£[x ¬∑ P(x)]
                    </div>
                    <div class="formula">
                        <strong>Variance (œÉ¬≤):</strong> œÉ¬≤ = Œ£[(x - Œº)¬≤ ¬∑ P(x)] = Œ£[x¬≤ ¬∑ P(x)] - Œº¬≤
                    </div>
                    <div class="formula">
                        <strong>Standard Deviation (œÉ):</strong> œÉ = ‚àö(œÉ¬≤)
                    </div>
                </div>
                
                <!-- Statistics Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">Mean (Œº)</div>
                        <div class="stat-value" id="meanValue">-</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Variance (œÉ¬≤)</div>
                        <div class="stat-value" id="varianceValue">-</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Standard Deviation (œÉ)</div>
                        <div class="stat-value" id="stdDevValue">-</div>
                    </div>
                </div>
                
                <!-- Chart -->
                <div class="chart-container">
                    <h3 style="color: #667eea; margin-bottom: 15px;">Distribution Graph</h3>
                    <div class="chart-wrapper">
                        <canvas id="distributionChart"></canvas>
                    </div>
                </div>
                
                <!-- Probability Calculator -->
                <div class="probability-calculator">
                    <div class="calc-title">üßÆ Probability Calculator</div>
                    
                    <div class="calc-options">
                        <label class="radio-option">
                            <input type="radio" name="calc-type" value="less" checked>
                            <span>P(X ‚â§ k) - Less than or equal to</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="calc-type" value="greater">
                            <span>P(X ‚â• k) - Greater than or equal to</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="calc-type" value="between">
                            <span>P(a ‚â§ X ‚â§ b) - Between two values</span>
                        </label>
                    </div>
                    
                    <div class="calc-inputs">
                        <div class="input-group">
                            <label for="calcValue1">Value (k):</label>
                            <input type="number" id="calcValue1" step="0.01" placeholder="Enter value">
                        </div>
                        <div class="input-group hidden" id="calcValue2Group">
                            <label for="calcValue2">Upper Value (b):</label>
                            <input type="number" id="calcValue2" step="0.01" placeholder="Enter upper value">
                        </div>
                    </div>
                    
                    <button onclick="calculateProbability()">Calculate Probability</button>
                    
                    <div id="calcResult" class="calc-result hidden">
                        <div id="calcResultText"></div>
                        <div class="calc-result-value" id="calcResultValue"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        let chart = null;
        let xValues = [];
        let probabilities = [];
        let currentDataType = 'frequency';
        let currentMean = 0;
        let currentVariance = 0;
        let currentStdDev = 0;
        
        // Update decimal display and recalculate if needed
        document.getElementById('decimals').addEventListener('input', function() {
            const decimals = this.value;
            document.getElementById('decimal-display').textContent = decimals + ' decimal places';
            
            // If results are showing, update them with new precision
            if (!document.getElementById('resultsSection').classList.contains('hidden')) {
                updateDisplayPrecision();
            }
            
            // Update table calculations
            if (!document.getElementById('dataSection').classList.contains('hidden')) {
                updateCalculations();
            }
        });
        
        function getDecimals() {
            return parseInt(document.getElementById('decimals').value);
        }
        
        function formatNumber(num) {
            return num.toFixed(getDecimals());
        }
        
        function updateDisplayPrecision() {
            document.getElementById('meanValue').textContent = formatNumber(currentMean);
            document.getElementById('varianceValue').textContent = formatNumber(currentVariance);
            document.getElementById('stdDevValue').textContent = formatNumber(currentStdDev);
        }
        
        // Update calculator inputs based on selection
        document.querySelectorAll('input[name="calc-type"]').forEach(radio => {
            radio.addEventListener('change', function() {
                const value2Group = document.getElementById('calcValue2Group');
                const label1 = document.querySelector('label[for="calcValue1"]');
                
                if (this.value === 'between') {
                    value2Group.classList.remove('hidden');
                    label1.textContent = 'Lower Value (a):';
                } else {
                    value2Group.classList.add('hidden');
                    label1.textContent = 'Value (k):';
                }
            });
        });
        
        function generateTable() {
            const numValues = parseInt(document.getElementById('numValues').value);
            const dataType = document.getElementById('dataType').value;
            currentDataType = dataType;
            
            if (isNaN(numValues) || numValues < 2 || numValues > 20) {
                alert('Please enter a valid number of values between 2 and 20');
                return;
            }
            
            // Update title
            document.getElementById('tableTitle').textContent = 
                dataType === 'frequency' ? 'Enter X Values and Frequencies' : 'Enter X Values and Probabilities';
            
            // Generate table header
            const header = document.getElementById('tableHeader');
            if (dataType === 'frequency') {
                header.innerHTML = `
                    <tr>
                        <th>X Value</th>
                        <th>Frequency (f)</th>
                        <th>Relative Frequency P(X)</th>
                    </tr>
                `;
            } else {
                header.innerHTML = `
                    <tr>
                        <th>X Value</th>
                        <th>Probability P(X)</th>
                    </tr>
                `;
            }
            
            // Generate table body
            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = '';
            
            for (let i = 0; i < numValues; i++) {
                const row = tbody.insertRow();
                
                // X value cell
                const xCell = row.insertCell();
                xCell.innerHTML = `<input type="number" step="0.01" id="x${i}" placeholder="X${i+1}" oninput="updateCalculations()">`;
                
                if (dataType === 'frequency') {
                    // Frequency cell
                    const freqCell = row.insertCell();
                    freqCell.innerHTML = `<input type="number" min="0" step="1" id="freq${i}" placeholder="f${i+1}" oninput="updateCalculations()">`;
                    
                    // Relative frequency cell (calculated)
                    const relFreqCell = row.insertCell();
                    relFreqCell.id = `relfreq${i}`;
                    relFreqCell.textContent = '-';
                } else {
                    // Probability cell
                    const probCell = row.insertCell();
                    probCell.innerHTML = `<input type="number" min="0" max="1" step="0.01" id="prob${i}" placeholder="P${i+1}" oninput="updateCalculations()">`;
                }
            }
            
            // Generate table footer
            const footer = document.getElementById('tableFooter');
            if (dataType === 'frequency') {
                footer.innerHTML = `
                    <tr class="total-row">
                        <td>Total</td>
                        <td id="totalFreq">-</td>
                        <td id="totalRelFreq">-</td>
                    </tr>
                `;
            } else {
                footer.innerHTML = `
                    <tr class="total-row">
                        <td>Total</td>
                        <td id="totalProb">-</td>
                    </tr>
                `;
            }
            
            document.getElementById('dataSection').classList.remove('hidden');
            document.getElementById('resultsSection').classList.add('hidden');
        }
        
        function updateCalculations() {
            const numValues = parseInt(document.getElementById('numValues').value);
            
            if (currentDataType === 'frequency') {
                let totalFreq = 0;
                const frequencies = [];
                
                // Calculate total frequency
                for (let i = 0; i < numValues; i++) {
                    const freq = parseFloat(document.getElementById(`freq${i}`).value) || 0;
                    frequencies.push(freq);
                    totalFreq += freq;
                }
                
                // Update relative frequencies
                for (let i = 0; i < numValues; i++) {
                    const relFreq = totalFreq > 0 ? (frequencies[i] / totalFreq) : 0;
                    document.getElementById(`relfreq${i}`).textContent = formatNumber(relFreq);
                }
                
                // Update totals
                document.getElementById('totalFreq').textContent = totalFreq;
                document.getElementById('totalRelFreq').textContent = totalFreq > 0 ? formatNumber(1.0) : '-';
            } else {
                let totalProb = 0;
                
                // Calculate total probability
                for (let i = 0; i < numValues; i++) {
                    const prob = parseFloat(document.getElementById(`prob${i}`).value) || 0;
                    totalProb += prob;
                }
                
                // Update total
                document.getElementById('totalProb').textContent = formatNumber(totalProb);
                
                // Show warning if total is not 1
                const warningDiv = document.getElementById('warningMessage');
                if (Math.abs(totalProb - 1.0) > 0.01 && totalProb > 0) {
                    warningDiv.innerHTML = '<div class="warning">‚ö†Ô∏è Warning: Probabilities should sum to 1.0</div>';
                } else {
                    warningDiv.innerHTML = '';
                }
            }
        }
        
        function calculateStatistics() {
            const numValues = parseInt(document.getElementById('numValues').value);
            xValues = [];
            probabilities = [];
            
            // Collect data
            for (let i = 0; i < numValues; i++) {
                const x = parseFloat(document.getElementById(`x${i}`).value);
                
                if (isNaN(x)) {
                    alert('Please fill in all X values');
                    return;
                }
                
                xValues.push(x);
                
                if (currentDataType === 'frequency') {
                    const freq = parseFloat(document.getElementById(`freq${i}`).value);
                    if (isNaN(freq) || freq < 0) {
                        alert('Please fill in all frequencies with non-negative values');
                        return;
                    }
                } else {
                    const prob = parseFloat(document.getElementById(`prob${i}`).value);
                    if (isNaN(prob) || prob < 0 || prob > 1) {
                        alert('Please fill in all probabilities with values between 0 and 1');
                        return;
                    }
                }
            }
            
            // Calculate probabilities
            if (currentDataType === 'frequency') {
                let totalFreq = 0;
                const frequencies = [];
                
                for (let i = 0; i < numValues; i++) {
                    const freq = parseFloat(document.getElementById(`freq${i}`).value);
                    frequencies.push(freq);
                    totalFreq += freq;
                }
                
                if (totalFreq === 0) {
                    alert('Total frequency cannot be zero');
                    return;
                }
                
                probabilities = frequencies.map(f => f / totalFreq);
            } else {
                for (let i = 0; i < numValues; i++) {
                    probabilities.push(parseFloat(document.getElementById(`prob${i}`).value));
                }
                
                const totalProb = probabilities.reduce((sum, p) => sum + p, 0);
                if (Math.abs(totalProb - 1.0) > 0.01) {
                    alert('Warning: Probabilities should sum to 1.0. Current sum: ' + totalProb.toFixed(4));
                }
            }
            
            // Calculate mean
            currentMean = xValues.reduce((sum, x, i) => sum + x * probabilities[i], 0);
            
            // Calculate variance
            currentVariance = xValues.reduce((sum, x, i) => sum + Math.pow(x - currentMean, 2) * probabilities[i], 0);
            
            // Calculate standard deviation
            currentStdDev = Math.sqrt(currentVariance);
            
            // Update display
            updateDisplayPrecision();
            
            // Update chart
            updateChart();
            
            // Show results
            document.getElementById('resultsSection').classList.remove('hidden');
        }
        
        function updateChart() {
            const ctx = document.getElementById('distributionChart').getContext('2d');
            
            if (chart) {
                chart.destroy();
            }
            
            chart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: xValues,
                    datasets: [{
                        label: 'P(X)',
                        data: probabilities,
                        backgroundColor: 'rgba(102, 126, 234, 0.7)',
                        borderColor: 'rgba(102, 126, 234, 1)',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top',
                        },
                        title: {
                            display: true,
                            text: 'Probability Distribution',
                            font: {
                                size: 16
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 1,
                            title: {
                                display: true,
                                text: 'Probability'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'X Value'
                            }
                        }
                    }
                }
            });
        }
        
        function calculateProbability() {
            if (xValues.length === 0 || probabilities.length === 0) {
                alert('Please calculate statistics first');
                return;
            }
            
            const calcType = document.querySelector('input[name="calc-type"]:checked').value;
            const value1 = parseFloat(document.getElementById('calcValue1').value);
            
            if (isNaN(value1)) {
                alert('Please enter a valid value');
                return;
            }
            
            let result = 0;
            let resultText = '';
            
            if (calcType === 'less') {
                // P(X <= k)
                result = xValues.reduce((sum, x, i) => {
                    return x <= value1 ? sum + probabilities[i] : sum;
                }, 0);
                resultText = `P(X ‚â§ ${value1})`;
            } else if (calcType === 'greater') {
                // P(X >= k)
                result = xValues.reduce((sum, x, i) => {
                    return x >= value1 ? sum + probabilities[i] : sum;
                }, 0);
                resultText = `P(X ‚â• ${value1})`;
            } else {
                // P(a <= X <= b)
                const value2 = parseFloat(document.getElementById('calcValue2').value);
                
                if (isNaN(value2)) {
                    alert('Please enter a valid upper value');
                    return;
                }
                
                if (value2 < value1) {
                    alert('Upper value must be greater than or equal to lower value');
                    return;
                }
                
                result = xValues.reduce((sum, x, i) => {
                    return (x >= value1 && x <= value2) ? sum + probabilities[i] : sum;
                }, 0);
                resultText = `P(${value1} ‚â§ X ‚â§ ${value2})`;
            }
            
            document.getElementById('calcResultText').textContent = resultText;
            document.getElementById('calcResultValue').textContent = formatNumber(result);
            document.getElementById('calcResult').classList.remove('hidden');
        }
    </script>
</body>
</html>
