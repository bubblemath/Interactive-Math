<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Statistics Learning Tool</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            padding: 40px;
        }
        
        h1 {
            color: #667eea;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2em;
        }
        
        .step {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .step-title {
            color: #667eea;
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 15px;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
        }
        
        input[type="number"], input[type="text"] {
            width: 100%;
            max-width: 300px;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }
        
        input[type="number"]:focus, input[type="text"]:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .data-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 10px;
            margin: 20px 0;
        }
        
        .data-input {
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 6px;
            text-align: center;
            font-size: 1em;
        }
        
        .data-display {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border: 2px solid #667eea;
        }
        
        .data-display-title {
            font-weight: 600;
            color: #667eea;
            margin-bottom: 10px;
        }
        
        .data-values {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .data-value {
            background: #667eea;
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-weight: 600;
        }
        
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-right: 10px;
            margin-top: 10px;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        .secondary-btn {
            background: #6c757d;
        }
        
        .check-answer-section {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
        }
        
        .answer-input-group {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .answer-input {
            width: 200px;
        }
        
        .feedback {
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            font-weight: 600;
            display: none;
        }
        
        .feedback.correct {
            background: #d4edda;
            color: #155724;
            border: 2px solid #c3e6cb;
            display: block;
        }
        
        .feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #f5c6cb;
            display: block;
        }
        
        .hidden {
            display: none;
        }
        
        .progress-indicator {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            gap: 10px;
        }
        
        .progress-step {
            flex: 1;
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            font-weight: 600;
            color: #999;
            font-size: 0.9em;
        }
        
        .progress-step.active {
            background: #667eea;
            color: white;
        }
        
        .progress-step.completed {
            background: #28a745;
            color: white;
        }
        
        .completion-message {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            font-size: 1.2em;
        }
        
        .summary-box {
            background: white;
            padding: 25px;
            border-radius: 10px;
            margin-top: 20px;
            color: #333;
        }
        
        .summary-title {
            color: #667eea;
            font-size: 1.4em;
            font-weight: 700;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .summary-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #eee;
            font-size: 1em;
        }
        
        .summary-item:last-child {
            border-bottom: none;
        }
        
        .performance-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }
        
        .performance-title {
            color: #667eea;
            font-weight: 700;
            font-size: 1.2em;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .performance-stat {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: white;
            border-radius: 6px;
            margin-bottom: 10px;
        }
        
        .performance-label {
            font-weight: 600;
            color: #333;
        }
        
        .performance-value {
            font-size: 1.3em;
            font-weight: 700;
            color: #667eea;
        }
        
        .overall-score {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            margin-top: 15px;
        }
        
        .overall-score-value {
            font-size: 3em;
            font-weight: 800;
            margin: 10px 0;
        }
        
        .attempts-info {
            font-size: 0.85em;
            color: #666;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸ“Š Statistics Learning Tool</h1>
        
        <div class="progress-indicator" id="progress">
            <div class="progress-step active" id="step1-indicator">1. Enter Data</div>
            <div class="progress-step" id="step2-indicator">2. Find Mode</div>
            <div class="progress-step" id="step3-indicator">3. Find Median</div>
            <div class="progress-step" id="step4-indicator">4. Find Mean</div>
        </div>
        
        <!-- Step 1: Data Entry -->
        <div class="step" id="step1">
            <div class="step-title">Step 1: Enter Your Data</div>
            
            <div class="input-group">
                <label for="dataCount">How many data values do you have?</label>
                <input type="number" id="dataCount" min="1" max="50" placeholder="Enter number of values">
                <button onclick="createDataInputs()">Create Data Entry Fields</button>
            </div>
            
            <div id="dataInputSection" class="hidden">
                <label>Enter your data values:</label>
                <div class="data-grid" id="dataGrid"></div>
                <button onclick="submitData()">Submit Data</button>
                <button class="secondary-btn" onclick="sortData()">Sort Data (Ascending)</button>
                
                <div id="dataDisplay" class="hidden">
                    <div class="data-display">
                        <div class="data-display-title">Your Data:</div>
                        <div class="data-values" id="dataValues"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Step 2: Find Mode -->
        <div class="step hidden" id="step2">
            <div class="step-title">Step 2: Find the Mode</div>
            <p style="margin-bottom: 15px;">The <strong>mode</strong> is the value that appears most frequently in the dataset. If no value repeats, there is no mode. If multiple values tie for most frequent, list all of them separated by commas.</p>
            
            <div class="data-display">
                <div class="data-display-title">Your Data:</div>
                <div class="data-values" id="dataValuesMode"></div>
            </div>
            
            <div class="check-answer-section">
                <div class="answer-input-group">
                    <label for="modeAnswer">Your answer for the mode:</label>
                    <input type="text" id="modeAnswer" class="answer-input" placeholder="e.g., 5 or 5,7 or 'no mode'">
                    <button onclick="checkMode()">Check Answer</button>
                </div>
                <div id="modeFeedback" class="feedback"></div>
            </div>
        </div>
        
        <!-- Step 3: Find Median -->
        <div class="step hidden" id="step3">
            <div class="step-title">Step 3: Find the Median</div>
            <p style="margin-bottom: 15px;">The <strong>median</strong> is the middle value when the data is arranged in order. If there's an even number of values, it's the average of the two middle values.</p>
            
            <div class="data-display">
                <div class="data-display-title">Your Data (Sorted):</div>
                <div class="data-values" id="dataValuesMedian"></div>
            </div>
            
            <div class="check-answer-section">
                <div class="answer-input-group">
                    <label for="medianAnswer">Your answer for the median:</label>
                    <input type="number" id="medianAnswer" class="answer-input" step="0.01" placeholder="e.g., 7.5">
                    <button onclick="checkMedian()">Check Answer</button>
                </div>
                <div id="medianFeedback" class="feedback"></div>
            </div>
        </div>
        
        <!-- Step 4: Find Mean -->
        <div class="step hidden" id="step4">
            <div class="step-title">Step 4: Find the Mean</div>
            <p style="margin-bottom: 15px;">The <strong>mean</strong> is the average of all values. Add all values together and divide by the number of values.</p>
            
            <div class="data-display">
                <div class="data-display-title">Your Data:</div>
                <div class="data-values" id="dataValuesMean"></div>
            </div>
            
            <div class="check-answer-section">
                <div class="answer-input-group">
                    <label for="meanAnswer">Your answer for the mean:</label>
                    <input type="number" id="meanAnswer" class="answer-input" step="0.01" placeholder="e.g., 8.25">
                    <button onclick="checkMean()">Check Answer</button>
                </div>
                <div id="meanFeedback" class="feedback"></div>
            </div>
        </div>
        
        <!-- Completion -->
        <div class="step hidden" id="completion">
            <div class="completion-message">
                ðŸŽ‰ Congratulations! You've completed all the statistics problems!
                
                <div class="summary-box">
                    <div class="summary-title">Summary of Your Results</div>
                    <div class="summary-item">
                        <span><strong>Dataset:</strong></span>
                        <span id="summaryData"></span>
                    </div>
                    <div class="summary-item">
                        <span><strong>Mode:</strong></span>
                        <span id="summaryMode"></span>
                    </div>
                    <div class="summary-item">
                        <span><strong>Median:</strong></span>
                        <span id="summaryMedian"></span>
                    </div>
                    <div class="summary-item">
                        <span><strong>Mean:</strong></span>
                        <span id="summaryMean"></span>
                    </div>
                </div>
                
                <div class="performance-section">
                    <div class="performance-title">Your Performance</div>
                    
                    <div class="performance-stat">
                        <span class="performance-label">Mode - Attempts:</span>
                        <span class="performance-value" id="modeAttempts">-</span>
                    </div>
                    
                    <div class="performance-stat">
                        <span class="performance-label">Median - Attempts:</span>
                        <span class="performance-value" id="medianAttempts">-</span>
                    </div>
                    
                    <div class="performance-stat">
                        <span class="performance-label">Mean - Attempts:</span>
                        <span class="performance-value" id="meanAttempts">-</span>
                    </div>
                    
                    <div class="overall-score">
                        <div>Overall Success Rate</div>
                        <div class="overall-score-value" id="successRate">-</div>
                        <div class="attempts-info" id="totalAttempts">-</div>
                    </div>
                </div>
                
                <button onclick="resetApp()" style="margin-top: 20px;">Start Over with New Data</button>
            </div>
        </div>
    </div>
    
    <script>
        let dataset = [];
        let sortedDataset = [];
        let correctMode = null;
        let correctMedian = null;
        let correctMean = null;
        
        // Track attempts
        let modeAttempts = 0;
        let medianAttempts = 0;
        let meanAttempts = 0;
        
        function createDataInputs() {
            const count = parseInt(document.getElementById('dataCount').value);
            
            if (isNaN(count) || count < 1 || count > 50) {
                alert('Please enter a valid number between 1 and 50');
                return;
            }
            
            const grid = document.getElementById('dataGrid');
            grid.innerHTML = '';
            
            for (let i = 0; i < count; i++) {
                const input = document.createElement('input');
                input.type = 'number';
                input.className = 'data-input';
                input.placeholder = `Value ${i + 1}`;
                input.step = '0.01';
                grid.appendChild(input);
            }
            
            document.getElementById('dataInputSection').classList.remove('hidden');
        }
        
        function submitData() {
            const inputs = document.querySelectorAll('.data-input');
            dataset = [];
            
            for (let input of inputs) {
                const value = parseFloat(input.value);
                if (isNaN(value)) {
                    alert('Please fill in all data values with valid numbers');
                    return;
                }
                dataset.push(value);
            }
            
            displayData();
            document.getElementById('dataDisplay').classList.remove('hidden');
            
            // Auto-advance to step 2
            setTimeout(moveToStep2, 500);
        }
        
        function sortData() {
            if (dataset.length === 0) {
                alert('Please submit your data first');
                return;
            }
            
            sortedDataset = [...dataset].sort((a, b) => a - b);
            dataset = sortedDataset;
            
            const inputs = document.querySelectorAll('.data-input');
            inputs.forEach((input, index) => {
                input.value = dataset[index];
            });
            
            displayData();
        }
        
        function displayData() {
            const container = document.getElementById('dataValues');
            container.innerHTML = '';
            
            dataset.forEach(value => {
                const span = document.createElement('span');
                span.className = 'data-value';
                span.textContent = value;
                container.appendChild(span);
            });
        }
        
        function calculateMode(data) {
            const frequency = {};
            let maxFreq = 0;
            
            data.forEach(value => {
                frequency[value] = (frequency[value] || 0) + 1;
                maxFreq = Math.max(maxFreq, frequency[value]);
            });
            
            if (maxFreq === 1) {
                return null; // No mode
            }
            
            const modes = Object.keys(frequency)
                .filter(key => frequency[key] === maxFreq)
                .map(Number)
                .sort((a, b) => a - b);
            
            return modes;
        }
        
        function calculateMedian(data) {
            const sorted = [...data].sort((a, b) => a - b);
            const mid = Math.floor(sorted.length / 2);
            
            if (sorted.length % 2 === 0) {
                return (sorted[mid - 1] + sorted[mid]) / 2;
            } else {
                return sorted[mid];
            }
        }
        
        function calculateMean(data) {
            const sum = data.reduce((acc, val) => acc + val, 0);
            return sum / data.length;
        }
        
        function moveToStep2() {
            if (dataset.length === 0) {
                alert('Please enter and submit your data first');
                return;
            }
            
            document.getElementById('step1').classList.add('hidden');
            document.getElementById('step2').classList.remove('hidden');
            document.getElementById('step1-indicator').classList.remove('active');
            document.getElementById('step1-indicator').classList.add('completed');
            document.getElementById('step2-indicator').classList.add('active');
            
            // Display data in step 2
            const container = document.getElementById('dataValuesMode');
            container.innerHTML = '';
            dataset.forEach(value => {
                const span = document.createElement('span');
                span.className = 'data-value';
                span.textContent = value;
                container.appendChild(span);
            });
            
            correctMode = calculateMode(dataset);
        }
        
        function checkMode() {
            modeAttempts++;
            const userAnswer = document.getElementById('modeAnswer').value.trim().toLowerCase();
            const feedback = document.getElementById('modeFeedback');
            
            let isCorrect = false;
            
            if (correctMode === null) {
                // No mode case
                isCorrect = userAnswer === 'no mode' || userAnswer === 'none';
            } else {
                // Parse user's answer
                const userModes = userAnswer.split(',').map(s => parseFloat(s.trim())).sort((a, b) => a - b);
                const correctModes = correctMode.sort((a, b) => a - b);
                
                isCorrect = userModes.length === correctModes.length &&
                           userModes.every((val, idx) => val === correctModes[idx]);
            }
            
            if (isCorrect) {
                feedback.className = 'feedback correct';
                feedback.textContent = `âœ“ Correct! Well done! (Attempts: ${modeAttempts})`;
                setTimeout(moveToStep3, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                if (correctMode === null) {
                    feedback.textContent = `âœ— Incorrect. Hint: No value appears more than once. (Attempt ${modeAttempts})`;
                } else {
                    feedback.textContent = `âœ— Incorrect. Try again! Hint: Look for the value(s) that appear most frequently. (Attempt ${modeAttempts})`;
                }
            }
        }
        
        function moveToStep3() {
            document.getElementById('step2').classList.add('hidden');
            document.getElementById('step3').classList.remove('hidden');
            document.getElementById('step2-indicator').classList.remove('active');
            document.getElementById('step2-indicator').classList.add('completed');
            document.getElementById('step3-indicator').classList.add('active');
            
            // Display sorted data
            sortedDataset = [...dataset].sort((a, b) => a - b);
            const container = document.getElementById('dataValuesMedian');
            container.innerHTML = '';
            sortedDataset.forEach(value => {
                const span = document.createElement('span');
                span.className = 'data-value';
                span.textContent = value;
                container.appendChild(span);
            });
            
            correctMedian = calculateMedian(dataset);
        }
        
        function checkMedian() {
            medianAttempts++;
            const userAnswer = parseFloat(document.getElementById('medianAnswer').value);
            const feedback = document.getElementById('medianFeedback');
            
            if (isNaN(userAnswer)) {
                feedback.className = 'feedback incorrect';
                feedback.textContent = 'âœ— Please enter a valid number.';
                return;
            }
            
            const tolerance = 0.01;
            const isCorrect = Math.abs(userAnswer - correctMedian) < tolerance;
            
            if (isCorrect) {
                feedback.className = 'feedback correct';
                feedback.textContent = `âœ“ Correct! The median is ${correctMedian.toFixed(2)} (Attempts: ${medianAttempts})`;
                setTimeout(moveToStep4, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = `âœ— Incorrect. Hint: Sort the data and find the middle value. With ${dataset.length} values, ${dataset.length % 2 === 0 ? 'average the two middle values' : 'the middle value is at position ' + (Math.floor(dataset.length / 2) + 1)}. (Attempt ${medianAttempts})`;
            }
        }
        
        function moveToStep4() {
            document.getElementById('step3').classList.add('hidden');
            document.getElementById('step4').classList.remove('hidden');
            document.getElementById('step3-indicator').classList.remove('active');
            document.getElementById('step3-indicator').classList.add('completed');
            document.getElementById('step4-indicator').classList.add('active');
            
            // Display data
            const container = document.getElementById('dataValuesMean');
            container.innerHTML = '';
            dataset.forEach(value => {
                const span = document.createElement('span');
                span.className = 'data-value';
                span.textContent = value;
                container.appendChild(span);
            });
            
            correctMean = calculateMean(dataset);
        }
        
        function checkMean() {
            meanAttempts++;
            const userAnswer = parseFloat(document.getElementById('meanAnswer').value);
            const feedback = document.getElementById('meanFeedback');
            
            if (isNaN(userAnswer)) {
                feedback.className = 'feedback incorrect';
                feedback.textContent = 'âœ— Please enter a valid number.';
                return;
            }
            
            const tolerance = 0.01;
            const isCorrect = Math.abs(userAnswer - correctMean) < tolerance;
            
            if (isCorrect) {
                feedback.className = 'feedback correct';
                feedback.textContent = `âœ“ Correct! The mean is ${correctMean.toFixed(2)} (Attempts: ${meanAttempts})`;
                setTimeout(showCompletion, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                const sum = dataset.reduce((a, b) => a + b, 0);
                feedback.textContent = `âœ— Incorrect. Hint: Add all values (sum = ${sum.toFixed(2)}) and divide by the count (${dataset.length}). (Attempt ${meanAttempts})`;
            }
        }
        
        function showCompletion() {
            document.getElementById('step4').classList.add('hidden');
            document.getElementById('completion').classList.remove('hidden');
            document.getElementById('step4-indicator').classList.remove('active');
            document.getElementById('step4-indicator').classList.add('completed');
            
            // Fill summary
            document.getElementById('summaryData').textContent = dataset.join(', ');
            document.getElementById('summaryMode').textContent = correctMode === null ? 'No mode' : correctMode.join(', ');
            document.getElementById('summaryMedian').textContent = correctMedian.toFixed(2);
            document.getElementById('summaryMean').textContent = correctMean.toFixed(2);
            
            // Fill performance stats
            document.getElementById('modeAttempts').textContent = modeAttempts;
            document.getElementById('medianAttempts').textContent = medianAttempts;
            document.getElementById('meanAttempts').textContent = meanAttempts;
            
            // Calculate success rate
            const totalAttempts = modeAttempts + medianAttempts + meanAttempts;
            const successRate = ((3 / totalAttempts) * 100).toFixed(1);
            
            document.getElementById('successRate').textContent = successRate + '%';
            document.getElementById('totalAttempts').textContent = `Got all 3 correct in ${totalAttempts} total attempts`;
        }
        
        function resetApp() {
            location.reload();
        }
    </script>
</body>
</html>
